# Hadoop 3.0 纠删码技术



### 原理

例子：https://www.cnblogs.com/basenet855x/p/7889994.html

比如：我们有 7、8、9 三个原始数据，通过矩阵乘法，计算出来两个校验数据 50、122。这时原始数据加上校验数据，一共五个数据：7、8、9、50、122，可以任意丢两个，然后通过算法进行恢复。

 ![EC](imgs/EC.png)





### 优势

　　纠删码技术作为一门数据保护技术，自然有许多的优势，首先可以解决的就是目前分布式系统，云计算中采用副本来防止数据的丢失。副本机制确实可以解决数据丢失的问题，但是翻倍的数据存储空间也必然要被消耗，这一点却是非常致命的。EC技术的运用就可以直接解决这个问题。



### 劣势

　　EC技术的优势确实明显，但是他的使用也是需要一些代价的，一旦数据需要恢复，他会造成2大资源的消耗:

　　1、网络带宽的消耗，因为数据恢复需要去读其他的数据块和校验块
　　2、进行编码，解码计算需要消耗CPU资源

　　概况来讲一句话，就是既耗网络又耗CPU，看来代价也不小。



### 适合场景

​	所以这么来看，将此计数用于线上服务可能会觉得不够稳定，所以最好的选择是用于冷数据集群，有下面2点原因可以支持这种选择

　　 1、冷数据集群往往有大量的长期没有被访问的数据，体量确实很大，采用EC技术，可以大大减少副本数
　　 2、冷数据集群基本稳定，耗资源量少，所以一旦进行数据恢复，将不会对集群造成大的影响

​	出于上述2种原因，冷数据集群无非是一个很好的选择。